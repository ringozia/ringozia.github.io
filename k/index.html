<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>sim cites</title>
	<style>
		body {
			width: 96%;
			height: 100%;

			margin-top: 0%;
			background-color: #15172eff;
		}

		button {
			padding: 10px;
			font-size: 20pt;
		}

		p {

			font-size: 10pt;
		}

		.txtbox {

			overflow-y: auto;

			width: 100%;
			border: 1px solid #000000;
			font-size: 5px;
			border-radius: 5px;
			padding: 3px;
			color: #FFF;
			line-height: 10px;




		}

		.card0 {

			background-color: #A9ABC859;
			padding: 10px;
			display: flex;
			justify-content: flex-start;
			border-radius: 8px;
			flex-direction: row;

			line-height: 5px;
			align-items: flex-start;
			margin-top: 2px;
		}

		.card0s {
			width: 50%;
			background-color: #A9ABC859;
			padding: 10px;
			display: flex;
			justify-content: flex-start;
			border-radius: 8px;
			flex-direction: row;

			line-height: 5px;
			align-items: center;
			margin: 0.5px;


		}

		.btncard {


			display: flex;
			justify-content: space-between;
			border-radius: 8px;
			flex-direction: row;

			line-height: 20px;
			align-items: center;
			margin-top: 2px;
			height: 40%;
		}

		.card1 {
			background-color: #A9ABC859;
			padding: 10px;
			display: flex;
			justify-content: space-between;
			border-radius: 8px;
			flex-direction: row;
			margin-bottom: 10px;
			margin-top: 10px;


		}

		.card2 {
			width: 100%;
			background-color: #A9ABC859;
			padding: 5px;
			border-radius: 6px;
			margin: 0.5px;


		}




		.card3 {
			line-height: 5px;

		}

		.card4 {
			width: 100%;
			background-color: #A9ABC859;
			padding: 10px;
			border-radius: 6px;
			margin: 0.5px;

			display: flex;
			align-items: center;
			flex-direction: column;
			height: 100%;
		}

		.cardgz {
			display: flex;
			flex-direction: row;
			justify-content: center;
			align-content: flex-start;
			flex-wrap: wrap;

		}

		.gzbtn {
			background-color: #C7DFF3;
			padding: 3px;
			margin: 2px;

			display: flex;
			border-radius: 4px;

			line-height: 26%;
			width: 24%;
			align-items: center;
			justify-content: center;



		}




		.font1 {
			font-size: 10px;
			color: #fff;
			#00000085
		}

		.font2 {
			line-height: 20px;
		}



		.fontsmall {
			font-size: 12px;

		}

		.jdt0 {
			width: 48%;
		}


		.btn1 {
			background-color: #A9ABC859;
			padding: 20px;
			margin: 3px;
			display: flex;

			justify-content: center;
			border-radius: 8px;
			flex-direction: row;

			line-height: 10px;
			align-items: center;

			width: 100%;
			height: 100%
		}



		.tc1 {
			display: none;
			/* é»˜è®¤éšè— */
			position: fixed;
			z-index: 1;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;

			background-color: rgba(0, 0, 0, 0.8);
			/* åŠé€æ˜èƒŒæ™¯ */


		}

		.tc1s {

			margin: 30% auto;
			padding: 10px;
			border: 1px solid #fff;
			border-radius: 8px;
			width: 50%;

			color: #fff;
			display: flex;
			align-items: center;
			flex-direction: column;
		}
	</style>
</head>

<body onload="startSimulation()">
	<h1>sim cites</h1>
	<div class="card0">
		<div class="card0s font2">
			<p id="tick">å¹´ä»½: 0</p>
			&emsp;
			<progress max="12" value="0" id="jdt0" class="jdt0"></progress>
		</div>
		<div class="card0s">
			<p id="dtt" class="font2">åœŸåœ°: 0 (100)</p>
			&emsp;
			<p id="dtd" class="font2">ç‚¹æ•°: 0</p>
		</div>
	</div>
	<div class="btncard">
		<div class="btn1" id="ibt1">äº§ä¸š</div>
		<div class="btn1" id="ibt2">å‘å±•</div>
		<div class="btn1" id="ibt3">æˆ˜äº‰</div>
		<div class="btn1" id="ibt4">å…³äº</div>
	</div>
	<div class="card1">
		<div class="card2">
			<div class="card3">
				<p id="dtr">äººå£ï¼š</p>
				<p class="font1" id="br">å‡ºç”Ÿç‡ï¼š</p>
				<p class="font1" id="dr">æ­»äº¡ç‡ï¼š</p>
			</div>
			<div class="card3">
				<p id="dtc">GDPï¼š</p>
				<p class="font1" id="dtca">å¢é•¿ï¼š</p>
				<p id="dtcj">rGDPï¼š</p>
			</div>
		</div>
		<div class="card2">
			<div class="card3">
				<p id="dtclv">ç­‰çº§ï¼š</p>
				<progress max="100" value="0" id="jdt1"></progress>
				<p id="cyn">äº§ä¸šï¼š</p>
				<p id="ccc">ä¼ä¸šå°±èŒç‡ï¼š</p>
				<p id="czl">åŸå¸‚åŒ–</p>
			</div>
		</div>
	</div>
	<div class="card0">
		<div class="card4">
			å¤§äº‹ä»¶
			<p>å¤§äº‹ä»¶çª—å£</p>
			<div class="txtbox" id="txtbox">
				å¼€å‘è®¡åˆ’<br>å‡çº§ä»»åŠ¡ï¼ˆç›¸åº”çš„å‡åˆ†äº‹ä»¶ï¼‰<br>æ¸¸æˆï¼šæ‹‰éœ¸/çŒœæ•°å­—/ç›²ç›’/æ‰“åœ°é¼ /å¤§å°æŠ¼ï¼ˆå¿…ä¸­/å¯èƒ½/éš¾åº¦ï¼‰<br>åŸå¸‚çŠ¶æ€æ <br>GDPæ³¢åŠ¨<br>é‡ç½®æ•°æ®<br>æˆ˜äº‰å’Œä¾µç•¥<br>æŠ˜çº¿å›¾<br>å¤§äº‹ä»¶çª—å£<br>ã€‚<br>ã€‚<br>ã€‚<br>ã€‚<br>ã€‚<br>ã€‚<br>
			</div>
		</div>
		<div class="card4">
			å¹´åº¦ä»»åŠ¡
			<p id="gztxt">å®Œæˆ</p>
			<dic class="card2">
				<div class="cardgz" id="cardgz">
					<div class="gzbtn" id="gbt1">
					</div>
					<div class="gzbtn" id="gbt2">
					</div>
					<div class="gzbtn" id="gbt3">
					</div>
					<div class="gzbtn" id="gbt4">
					</div>
					<div class="gzbtn" id="gbt5">
					</div>
					<div class="gzbtn" id="gbt6">
					</div>
					<div class="gzbtn" id="gbt7">
					</div>
					<div class="gzbtn" id="gbt8">
					</div>
					<div class="gzbtn" id="gbt9">
					</div>
				</div>
			</dic>
		</div>
	</div>
	<br>
	<button id="btna1">LV</button>
	<div id="tc1" class="tc1">
		<div class="tc1s">
			é€‰æ‹©éœ€è¦æ–°å»ºçš„äº§ä¸šï¼š
			<p class="font1" id="cytxt0" style="text-align: center">ç‚¹æ•°ï¼šåœŸåœ°ï¼š<br>äº§ä¸šæƒ…å†µï¼š</p>
			<div class="card2 ncy" id="ncy1">
				å†œä¸š
				<p class="font1" id="cytxt1">éœ€æ±‚ï¼šç‚¹æ•°ï¼ŒåœŸåœ°</p>
			</div>
			<div class="card2 ncy" id="ncy2">
				å·¥ä¸š
				<p class="font1" id="cytxt2">éœ€æ±‚ï¼šç­‰çº§ï¼Œç‚¹æ•°ï¼ŒåœŸåœ°</p>
			</div>
			<div class="card2 ncy" id="ncy3">
				å•†ä¸š
				<p class="font1" id="cytxt3">éœ€æ±‚ï¼šç­‰çº§ï¼Œç‚¹æ•°ï¼ŒåœŸåœ°</p>
			</div>
			<div class="card2 ncy" id="ncy4">
				ä¿¡æ¯ä¸š
				<p class="font1" id="cytxt4">éœ€æ±‚ï¼šç­‰çº§ï¼Œç‚¹æ•°ï¼ŒåœŸåœ°</p>
			</div>
			<p class="font1" id="ncypip">è½»è§¦ç•Œé¢å¤–ä»¥å…³é—­ç•Œé¢</p>
		</div>
	</div>
</body>
<script>
	//é¢œè‰²å£°æ˜
	var btncl1 = ['#A9ABC859', '#a9abc8cc'];

	var btncl2 = ['#A9ABC859', '#a9abc8c3'];

	let dtr = 500; // åˆå§‹äººå£
	let cyn = 1; // åˆå§‹äº§ä¸šæ•°é‡
	let cyg = 0;
	let cys = 0;
	let cyx = 0;
	var cyrs = [500, 1000, 600, 700]
	//æ¯ä¸ªäº§ä¸šæ‰€å¸¦æ¥çš„äººå£
	var cyds = [[0, 1, 1], [10, 3, 1], [30, 3, 1], [64, 5, 1]]
	//æ–°å»ºäº§ä¸šéœ€æ±‚

	//åœŸåœ°&ç‚¹æ•°
	var dtt = 100;
	var dtts = 1;

	var dtd = 80;

	//æ›´æ–°æ•°æ®
	let tick = 0; //æ—¶åˆ»12t=1y
	let years = 0; //å¹´
	//è¯»å–å­˜æ¡£æ•°æ®
	var kyears = localStorage.getItem('years');
	//console.log(kyears)
	if (kyears >= 1) {
		// æ¨¡æ‹Ÿçš„å¹´æ•°
		years = kyears;

	} else {
		years = 0;
	}

	//dtc
	var dtc = 0;
	var dtcs = [100, 350, 300, 500]
	//å„ä¸ªäº§å€¼å¯ä»¥æœ‰äº‹ä»¶æ³¢åŠ¨
	var dtclv = 0;
	var gdpa = 0; //max100åŠ æˆï¼Œå®Œæˆçºªä»»åŠ¡å¯å¾—
	// æ¨¡æ‹Ÿä¸€å¹´

	//å¾€å¹´gdp
	var bfc1 = 0;
	var bfc2 = 0;


	//åˆå§‹emj
	var semj1 = 'â­•ï¸';
	var semj2 = 'âŒ';

	var luk = 0;

	function simulateYear() {
		bfc1 = dtc;

		//å‡ºç”Ÿ æ­»äº¡ç‡ åŸºç¡€æ³¢åŠ¨å€¼
		let dtlb = 0.005 + 0.000 * Math.sin(tick);
		let dtld = 0.003 + 0.000 * Math.cos(tick);


		let cya = cyn + cyg + cys + cyx;
		let czl = (1 - (cyn / cya)) * 100;

		// æ›´æ–°äº§ä¸šæ•°é‡ï¼Œè¿™é‡Œç®€å•æ¨¡æ‹Ÿäº§ä¸šæ•°é‡éšæ—¶é—´å¢åŠ 
		//cyn += 1;

		//cyn*num æ¯ä¸ªäº§ä¸šå‘˜å·¥æ•°é‡
		var cc = dtr / ((cyn * cyrs[0]) + (cyg * cyrs[1]) + (cys * cyrs[2]) + (cyx * cyrs[3]))

		//äº§ä¸šç©ºä½ä¸ç”Ÿè‚²ç‡ï¼ˆäººå£è¿‡å°‘æ—¶å˜åŒ–ä¸æ˜æ˜¾
		var dtlbx = ((1 - cc) / 20).toFixed(3);
		//console.log(dtlbx);

		dtlb += Number(dtlbx)
		//console.log('xxx')

		//æ»¡å‘˜æ—¶ äººå£å‡å°‘
		if (cc >= 1) {
			dtld = 0.008 + 0.001 * Math.cos(tick);
		}


		//å†œä¸šå æ¯”å¢ç›Š

		// è®¡ç®—å‡ºç”Ÿå’Œæ­»äº¡äººæ•°
		let dtbn = dtr * dtlb;
		let dtdn = dtr * dtld;

		// æ›´æ–°äººå£
		dtr += (dtbn - dtdn);




		//äº§å€¼è®¡ç®—
		dtc += ((cyn * dtcs[0]) + (cyg * dtcs[1]) + (cys * dtcs[2] + (cyx * dtcs[3])))
		//æ³¢åŠ¨åŠ æˆ
		dtc += dtc * (0.062 + 0.010 * Math.cos(tick))

		//äº§å€¼è¿›æ­¥åŠ æˆ  åŸé•‡ç‡+èŒä½ å‡
		var ccx = ((1 - cc) + (czl / 100)) / 2;
		ccx = (ccx / 50).toFixed(3);
		//console.log('è¿›æ­¥' + ccx);

		//ç”±äºäº§å€¼æ˜¯æ¯å¹´è®¡ç®—ä¸€æ¬¡çš„ï¼Œæ•…è¿›æ­¥æ— æ•ˆ
		//dtc += dtc * Number(ccx);


		//ç­‰çº§äº§å€¼åŠ æˆ
		if (dtclv >= 1) {
			dtc = dtc * dtclv

		};



		var dtcj = (dtc / dtr);

		dtc = dtc / 10000
		//dtca = dtca/10000
		//console.log(dtc)

		var zzlc = dtc - bfc1

		//var sjsa = Math.floor(Math.random() * 35) + 10;


		//åå¹´ä¸€çºª




		if (tick > 12) {
			//æ¯å¹´æ›´æ–°emj
			var emj1 = ['â­•ï¸', 'ğŸ¤£', 'ğŸ˜Š', 'ğŸ”', 'ğŸ’', 'â¤ï¸', 'ğŸŒ', 'â˜€ï¸', 'ğŸŒ¹', 'ğŸ™‹ğŸ»â€â™‚ï¸'];

			var emj2 = ['âŒ', 'ğŸ˜¨', 'ğŸ˜­', 'ğŸ’©', 'ğŸ’£', 'ğŸ–¤', 'ğŸŒš', 'ğŸŒ§', 'ğŸ¥€', 'ğŸ™…ğŸ»â€â™‚ï¸'];

			var listkk = Math.floor(Math.random() * (emj1.length)) + 0;

			semj1 = emj1[listkk]

			semj2 = emj2[listkk]


			console.log('ä¸€çºª')

			document.getElementById('jdt1').value = dtclv
			tick = 0;
			years++;



			//æƒ©ç½šæœºåˆ¶
			if (kk < 3) {
				var kkkx = (Math.random() * 0.6) + 0.2;//æƒ³è¦éšæœºå°æ•°  ä¸èƒ½æœ‰floor
				if(kkkx>dtclv){
					kkkx = dtclv;
				}
				dtclv -= kkkx;
				
				
			}
			else {

				//æ›´æ–°ç­‰çº§
				dtclv += luk;
			}
			
			document.getElementById("dtclv").innerText = "ç­‰çº§: " + (dtclv.toFixed(2));


			//æ›´æ–°æ ¼å­
			var elements = document.querySelectorAll('.gzbtn');

			elements.forEach(function(element) {
				document.getElementById(element.id).innerText = ''
			})
			//æ›´æ–°æ•°æ®
			ka = 0;
			kb = 0;
			kk = 0;

			document.getElementById('gztxt').innerText = 'è¯·è‡³å°‘ç¿»ç‰Œä¸‰å¼ '


		}


		document.getElementById('jdt0').value = (tick)

		document.getElementById("dtt").innerText = "åœŸåœ°: " + dtts + '/' + dtt;

		document.getElementById("dtd").innerText = "ç‚¹æ•°: " + dtd;

		document.getElementById("cytxt0").innerHTML = "äº§ä¸š: " + cya + ' ã…¤( ã…¤' + cyn + ' ã…¤' + cyg + ' ã…¤' + cys + ' ã…¤' + cyx + ' ã…¤)' + '<br>' + "åœŸåœ°: " + dtts + '/' + dtt + ' ã…¤' + 'ç‚¹æ•°ï¼š' + dtd;


		// æ˜¾ç¤ºç»“æœ
		document.getElementById("dtr").innerText = "äººå£: " + Math.round(dtr);
		document.getElementById("cyn").innerText = "äº§ä¸š: " + cya + '(' + cyn + '/' + cyg + '/' + cys + '/' + cyx + ')';


		//tickåˆ·æ–°

		tick++;




		document.getElementById("tick").innerText = "å¹´ä»½: " + years;

		document.getElementById("br").innerText = "å‡ºç”Ÿç‡: " + (dtlb.toFixed(3)) + ' ( +' + dtbn.toFixed() + ' )';

		document.getElementById("dr").innerText = "æ­»äº¡ç‡: " + (dtld.toFixed(3)) + ' ( -' + dtdn.toFixed() + ' )';

		document.getElementById("ccc").innerText = "äº§ä¸šå æœ‰ç‡: " + ((cc * 100).toFixed(2) + '%');

		document.getElementById("czl").innerText = "åŸé•‡åŒ–: " + (czl.toFixed()) + '%';

		document.getElementById("dtc").innerText = "GDP: " + (dtc.toFixed(3)) + 'äº¿';

		document.getElementById("dtcj").innerText = "å‡GDP: " + (dtcj.toFixed(2)) + 'ä¸‡';


		document.getElementById("dtca").innerText = "å¢é‡: " + (zzlc.toFixed(3)) + 'äº¿';


		document.getElementById('cytxt1').innerText = 'éœ€æ±‚ï¼š' + cyds[0][0] + 'ç­‰çº§ï¼Œ' + cyds[0][1] + 'ç‚¹æ•°ï¼Œ' + cyds[0][2] + 'åœŸåœ°';

		document.getElementById('cytxt2').innerText = 'éœ€æ±‚ï¼š' + cyds[1][0] + 'ç­‰çº§ï¼Œ' + cyds[1][1] + 'ç‚¹æ•°ï¼Œ' + cyds[1][2] + 'åœŸåœ°';

		document.getElementById('cytxt3').innerText = 'éœ€æ±‚ï¼š' + cyds[2][0] + 'ç­‰çº§ï¼Œ' + cyds[2][1] + 'ç‚¹æ•°ï¼Œ' + cyds[2][2] + 'åœŸåœ°';

		document.getElementById('cytxt4').innerText = 'éœ€æ±‚ï¼š' + cyds[3][0] + 'ç­‰çº§ï¼Œ' + cyds[3][1] + 'ç‚¹æ•°ï¼Œ' + cyds[3][2] + 'åœŸåœ°';
		//å­˜æ¡£
		localStorage.setItem('years', years);




	};

	// å¾ªç¯æ‰§è¡Œæ¨¡æ‹Ÿ
	function startSimulation() {
		simulateYear();
		setTimeout(startSimulation, 500); // æ¯ç§’æ‰§è¡Œä¸€æ¬¡
	};
	document.getElementById('btna1').addEventListener('click', function() {
		console.log('äº¤äº’')


		dtclv += Math.random() * 0.60 + 0.20;

		document.getElementById("dtclv").innerText = "ç­‰çº§: " + (dtclv.toFixed(2));

	});


	document.addEventListener('DOMContentLoaded', function() {
		//startevent();

	});





	//æŒ‰é’®å¼¹çª—  åˆ¤å®šç‚¹å‡»æŸä¸ªæŒ‰é’®æ—¶
	// è·å–å…ƒç´ 
	var elements = document.querySelectorAll('.btn1');

	var kbt = document.getElementById('tc1');


	// ä¸ºæ¯ä¸ªå…ƒç´ æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
	elements.forEach(function(element) {
		element.addEventListener('click', function() {
			var eleid = element.id;
			console.log('é€‰æ‹©æŒ‰é’®' + eleid);

			if (eleid == 'ibt1')
			{
				kbt.style.display = "block"
			}

		});
	});



	//æ–°å»ºäº§ä¸š åˆ¤æ–­æŒ‰é’®
	var elements = document.querySelectorAll('.ncy');

	elements.forEach(function(element) {
		element.addEventListener('click', function() {



			var eleid = element.id;
			var cy_btn = document.getElementById(eleid);

			cy_btn.style.backgroundColor = btncl2[1];

			setTimeout(function() {
				cy_btn.style.backgroundColor = btncl2[0];
			}, 80);

			var pdlv = 0;
			var pdtd = 0;
			var pdtt = 0;

			var cyall = [cyn, cyg, cys, cyx];
			var cynum = 0;

			if (eleid == 'ncy1')
			{
				pdlv = cyds[0][0];
				pdtd = cyds[0][1];
				pdtt = cyds[0][2];
				cynum = 0;
			}
			else if (eleid == 'ncy2') {
				pdlv = cyds[1][0];
				pdtd = cyds[1][1];
				pdtt = cyds[1][2];
				cynum = 1
			}
			else if (eleid == 'ncy3') {
				pdlv = cyds[2][0];
				pdtd = cyds[2][1];
				pdtt = cyds[2][2];
				cynum = 2;
			}
			else if (eleid == 'ncy4') {
				pdlv = cyds[3][0];
				pdtd = cyds[3][1];
				pdtt = cyds[3][2];
				cynum = 3;
			}


			if (dtclv < pdlv || dtd < pdtd || dtts >= dtt) {
				console.log('æ¡ä»¶ä¸è¶³ï¼')
				document.getElementById('ncypip').innerText = 'éœ€æ±‚æœªè¾¾æˆï¼'

				setTimeout(function() {
					document.getElementById('ncypip').innerText = 'è½»è§¦ç•Œé¢å¤–ä»¥å…³é—­ç•Œé¢'
				}, 1000)
			}
			else {
				//æ–°å»ºæˆåŠŸ
				dtd -= pdtd;
				dtts += 1;

				if (cynum == 0) {
					cyn += 1;
				}
				else if (cynum == 1) {
					cyg += 1;
				}
				else if (cynum == 2) {
					cys += 1;
				}
				else if (cynum == 3) {
					cyx += 1;
				}


			}



		});
	});

	//æ–°å»ºäº§ä¸š åˆ¤æ–­æŒ‰é’®
	var elements = document.querySelectorAll('.gzbtn');


	var ka = 0;
	var kb = 0;
	var kk = 0;

	elements.forEach(function(element) {
		element.addEventListener('click', function() {
			var eleid = element.id;
			if (eleid == 'gbt1') {

			}




			var bttmd = document.getElementById(eleid);

			if (bttmd.innerText) {
				console.log('å­˜åœ¨å†…å®¹')
			} else {


				bttmd.style.opacity = 0.7;
				setTimeout(function() {
					bttmd.style.opacity = 1.0;
				}, 30)


				//æŠ½ä¸­ç‡
				var gsjn1 = Math.floor(Math.random() * 3) + 1;



				if (gsjn1 == 1) {
					bttmd.innerText = semj1;
					ka++;
				} else {
					bttmd.innerText = semj2;
					kb++;
				}
				kk++;

				luk = 0;
				if (kk >= 3) {
					luk = ka / kk
					console.log(luk)
					document.getElementById('gztxt').innerText = 'æœ¬æ¬¡å¢ç›Š' + luk.toFixed(2)
				}
			}

		})
	});

	//åŒæ­¥æ ¼å­æŒ‰é’®é«˜å®½
	var elements = document.querySelectorAll('.gzbtn');

	elements.forEach(function(element) {

		var gzsize = document.getElementById(element.id);
		var mosa = gzsize.offsetWidth - 8;
		gzsize.style.height = mosa + 'px';

		//åŒæ­¥å¤§äº‹ä»¶çª—å£å¤§å°
		var txtboxk = document.getElementById('txtbox');
		txtboxk.style.height = document.getElementById('cardgz').offsetHeight + 3 + 'px';
	});



	window.onclick = function(event) {
		if (event.target == kbt) {
			kbt.style.display = "none";
		}
	}
</script>

</html>
